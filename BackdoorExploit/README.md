# BackdoorExploit

BackdoorExploit is a very simple mod with only one feature: it adds a "backdoor virus" that can be installed on computers in order to _silently_ acquire admin permissions. Usage is simple, and extensions are able to limit functionality.

## Acquisition

By default, the exe will just be given to you the first time your OS loads after installing the mod, as `/bin/Backdoor.exe` on the player's computer. This will then set the flag `ADDED_BACKDOOR_EXE` to prevent it from being re-added, such as if an extension mission makes the player lose it.

## Usage

The program is semi-intelligent, handling both installation and activation of the backdoor exploit on whatever computer the user is connected to. However, the checks are intentionally very simple: if the user has admin access on the target, the exploit will be _installed_; if the user doesn't have admin access, the exploit will be _triggered_.

This means that if the exploit is already installed, running `Backdoor` again will have no effect. If you attempt to _trigger_ the exploit on a computer that doesn't have it, the program will take the _full_ execution time, only to report failure at the end. Since `Backdoor` takes very little RAM, there are no checks performed for early-exit or redudant-installation in order to fit as more "realistic". The tradeoff is cheaper execution but no convenience checks.

However, since `Backdoor` does _not_ count as a hostile action (regardless of what it does _or_ doesn't do), you lose nothing in trying to trigger the exploit on a system you aren't sure about, unless of course you're in ETAS or something similar.

## Configuration

It's possible to configure the duration of each phase of the program in a standard BepInEx configuration file. All durations are in seconds and accept floating point values. The config file entries include comments describing them in more details.

It is further possible to change the folder path and filename of the exploit file. The folder may be empty or `/` to indicate the root folder, or any number of levels deep, using forward slashes as the path separator. The filename, of course, should _not_ contain forward slashes.

It is not possible to change the amount of RAM used by the program, as the visual effects were designed with its current size in mind.

## Extensions

There are four wildcard tags that can be used in extension XML files:

- `#BACKDOOR_EXE#` is replaced with the "magic data" for the executable itself, allowing it to be placed on specific computers.
- `#BACKDOOR_EXPLOIT_FOLDER#` is replaced with the folder path that the backdoor file must be in. This may include subfolders by using `/` as a separator, and may be empty or `/` to specify the root folder itself.
- `#BACKDOOR_EXPLOIT_FILENAME#` is replaced with the name of the file that the backdoor exploit is "installed" into.
- `#BACKDOOR_EXPLOIT_CONTENT#` is replaced with the "magic data" for the exploit itself, alowing it to be pre-installed on specific computers in combination with the above two.

The result of this is that if a computer has a file named `#BACKDOOR_EXPLOIT_FILENAME#` in the folder named `#BACKDOOR_EXPLOIT_FOLDER#` with the specific (_exact_) contents `#BACKDOOR_EXPLOIT_CONTENT#`, then the `Backdoor` program can successfully trigger the exploit on that computer, which will grant the player admin access to it _without_ triggering any hostile action response. Similarly, when the `Backdoor` programs _installs_ the exploit on a computer, the file named `#BACKDOOR_EXPLOIT_FILENAME#` in the folder named `#BACKDOOR_EXPLOIT_FOLDER#` _will have_ the specific (exact) contents `#BACKDOOR_EXPLOIT_CONTENT#` in it.

### Limiting Usage

Extensions can also control how the player can use `Backdoor` by setting and unsetting two specific flags:

- `NO_INSTALL_BACKDOOR` will prevent the program from installing the exploit.
	- This can be used to limit which computers have the exploit, with a critical caveat:
	- The exploit is a specific file with specific content, on the target system. There's nothing preventing the player from simply downloading that file from an "infected" system, breaking into a "clean" system (the normal way), and replacing the "clean" file with the "infected" one.
	- On the other hand, this may be a desired feature, by making the backdoor installation feel more "realistic" and "hacker-y" instead of a fully automated process.
- `NO_TRIGGER_BACKDOOR` will prevent the program from _using_ the exploit.
	- This may sound strange, but it would allow a custom mission to create an objective where a particular system must be "infected" with the exploit in order to progress.
	- On the other hand, as mentioned above, it's also just a specific file with specific content, so you could accomplish the same thing by making the player upload a file instead.

If an extension wants to control when the player gets the program, the flag `NO_ADD_BACKDOOR_EXE` will stop the mod from automatically giving the player a copy of the program.

## Debugging and Testing

The exploit file's name is configurable, but the _default_ value varies between **debug** and **release** builds of the mod. In release builds, the default name is `netcfgx.dll`, which is one of the files always generated in filesystems for all computers. This was chosen to imitate the "realism" of having to infect a networking library file with your virus. In debug builds, for ease of testing, the file is instead `sysv.dll`, which doesn't exist anywhere in the base game (or the Labyrinths DLC), in order to make it not _totally_ immersion breaking (nobody would leave a `backdoor.dll` file alone) while still making it easy to spot (and delete) at a glance.

When using a debug build, there is a special `configBackdoor` command available to view and adjust the configuration settings on-the-fly, so you can tune the values without needing to constantly relaunch your game. This command is _not_ present on release builds - it isn't merely disabled, release builds strip out the code responsible so it isn't even compiled into the resulting file.
